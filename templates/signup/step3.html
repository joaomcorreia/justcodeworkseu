{% extends "website/base.html" %}
{% load static %}

{% block title %}Choose Your Template - JustCodeWorks.EU{% endblock %}

{% block content %}
<div class="signup-container py-5">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <!-- Progress Bar -->
                <div class="signup-progress mb-5">
                    <div class="progress-steps d-flex justify-content-between">
                        <div class="step completed">
                            <div class="step-number">✓</div>
                            <div class="step-label">Business Info</div>
                        </div>
                        <div class="step completed">
                            <div class="step-number">✓</div>
                            <div class="step-label">Domain Name</div>
                        </div>
                        <div class="step active">
                            <div class="step-number">3</div>
                            <div class="step-label">Template</div>
                        </div>
                        <div class="step">
                            <div class="step-number">4</div>
                            <div class="step-label">Ready!</div>
                        </div>
                    </div>
                </div>

                <!-- Template Selection Card -->
                <div class="card signup-card shadow-lg">
                    <div class="card-header bg-warning text-dark text-center py-4">
                        <h2 class="mb-0">
                            <i class="bi bi-palette me-2"></i>
                            Choose Your Website Design
                        </h2>
                        <p class="mb-0 mt-2">Perfect for <strong>{{ business_name }}</strong> at <strong>{{ selected_domain }}</strong></p>
                    </div>
                    <div class="card-body p-5">
                        <form method="post" action="{% url 'signup_complete' %}">
                            {% csrf_token %}
                            
                            <div class="template-selection">
                                <div class="row g-4">
                                    <!-- TP1 - Professional Tech Template -->
                                    <div class="col-lg-6">
                                        <div class="template-option" onclick="selectTemplate('tp1')">
                                            <input type="radio" name="selected_template" value="tp1" id="template_tp1">
                                            <div class="template-preview">
                                                <div class="template-mockup tp1-mockup">
                                                    <div class="mockup-header">
                                                        <div class="mockup-nav">{{ business_name }}</div>
                                                        <div class="mockup-buttons">
                                                            <span class="btn-mock primary">Services</span>
                                                            <span class="btn-mock outline">Portfolio</span>
                                                        </div>
                                                    </div>
                                                    <div class="mockup-hero">
                                                        <h3>Professional Solutions</h3>
                                                        <p>Modern, clean design perfect for tech companies</p>
                                                        <div class="mockup-features">
                                                            <div class="feature-box"></div>
                                                            <div class="feature-box"></div>
                                                            <div class="feature-box"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="template-info">
                                                <h4 class="template-name">
                                                    <i class="bi bi-laptop me-2"></i>Professional Tech
                                                </h4>
                                                <div class="template-description">
                                                    Perfect for technology companies, consultants, and professional services
                                                </div>
                                                <div class="template-features mt-3">
                                                    <span class="feature-badge">Modern Design</span>
                                                    <span class="feature-badge">Clean Layout</span>
                                                    <span class="feature-badge">Professional</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- TP2 - Dutch Construction Template -->
                                    <div class="col-lg-6">
                                        <div class="template-option" onclick="selectTemplate('tp2')">
                                            <input type="radio" name="selected_template" value="tp2" id="template_tp2">
                                            <div class="template-preview">
                                                <div class="template-mockup tp2-mockup">
                                                    <div class="mockup-header orange">
                                                        <div class="mockup-nav">{{ business_name }}</div>
                                                        <div class="mockup-buttons">
                                                            <span class="btn-mock orange">Diensten</span>
                                                            <span class="btn-mock blue">Portfolio</span>
                                                        </div>
                                                    </div>
                                                    <div class="mockup-hero construction">
                                                        <h3>Vakmanschap & Kwaliteit</h3>
                                                        <p>Warm Dutch design perfect for construction</p>
                                                        <div class="mockup-features">
                                                            <div class="feature-box orange"></div>
                                                            <div class="feature-box blue"></div>
                                                            <div class="feature-box orange"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="template-info">
                                                <h4 class="template-name">
                                                    <i class="bi bi-hammer me-2"></i>Dutch Construction
                                                </h4>
                                                <div class="template-description">
                                                    Perfect for construction, building, and trade companies in the Netherlands
                                                </div>
                                                <div class="template-features mt-3">
                                                    <span class="feature-badge orange">Dutch Design</span>
                                                    <span class="feature-badge blue">Construction Focus</span>
                                                    <span class="feature-badge">Local Appeal</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Selected Template Display -->
                            <div id="selected-template-display" class="selected-template-preview mt-4" style="display: none;">
                                <div class="alert alert-success">
                                    <h6 class="fw-bold mb-2">
                                        <i class="bi bi-check-circle me-2"></i>Selected Template:
                                    </h6>
                                    <div id="selected-template-name" class="fs-5"></div>
                                    <small class="text-muted">This design will be applied to your website!</small>
                                </div>
                            </div>

                            <!-- Preview Info -->
                            <div class="preview-info mt-4">
                                <div class="alert alert-info">
                                    <h6 class="fw-bold">
                                        <i class="bi bi-eye me-2"></i>What happens next:
                                    </h6>
                                    <ul class="mb-0">
                                        <li>Your website will be created instantly at <strong>{{ selected_domain }}</strong></li>
                                        <li>You'll get access to an admin panel to customize content</li>
                                        <li>All pages (About, Services, Portfolio, Contact) will be ready</li>
                                        <li>You can start editing immediately!</li>
                                    </ul>
                                </div>
                            </div>

                            <!-- Navigation Buttons -->
                            <div class="signup-navigation mt-5">
                                <div class="row">
                                    <div class="col-6">
                                        <a href="{% url 'signup_step2' %}" class="btn btn-outline-secondary btn-lg w-100">
                                            <i class="bi bi-arrow-left me-2"></i>Back
                                        </a>
                                    </div>
                                    <div class="col-6">
                                        <button type="submit" id="create-website-btn" class="btn btn-warning btn-lg w-100" disabled>
                                            <i class="bi bi-rocket-takeoff me-2"></i>Create My Website!
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
function selectTemplate(templateType) {
    // Update radio button
    document.getElementById('template_' + templateType).checked = true;
    
    // Update template options
    document.querySelectorAll('.template-option').forEach(option => {
        option.classList.remove('selected');
    });
    event.currentTarget.classList.add('selected');
    
    // Update selected template display
    const templateNames = {
        'tp1': 'Professional Tech Template',
        'tp2': 'Dutch Construction Template'
    };
    
    document.getElementById('selected-template-name').textContent = templateNames[templateType];
    document.getElementById('selected-template-display').style.display = 'block';
    
    // Enable create button
    document.getElementById('create-website-btn').disabled = false;
}
</script>

<style>
.signup-container {
    background: linear-gradient(135deg, #ffc107 0%, #ff8f00 100%);
    min-height: 100vh;
}

.template-option {
    border: 3px solid #e9ecef;
    border-radius: 15px;
    padding: 0;
    background: white;
    cursor: pointer;
    transition: all 0.3s ease;
    overflow: hidden;
}

.template-option:hover {
    border-color: #ffc107;
    box-shadow: 0 8px 25px rgba(255, 193, 7, 0.3);
    transform: translateY(-5px);
}

.template-option.selected {
    border-color: #ffc107;
    box-shadow: 0 8px 30px rgba(255, 193, 7, 0.4);
    transform: translateY(-5px);
}

.template-option input[type="radio"] {
    display: none;
}

.template-preview {
    height: 300px;
    overflow: hidden;
}

.template-mockup {
    width: 100%;
    height: 100%;
    padding: 1rem;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.tp2-mockup {
    background: linear-gradient(135deg, #ff7b25 0%, #1e88e5 100%);
}

.mockup-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.5rem 1rem;
    background: rgba(255,255,255,0.2);
    border-radius: 8px;
    margin-bottom: 1rem;
}

.mockup-header.orange {
    background: rgba(255, 123, 37, 0.3);
}

.mockup-nav {
    font-weight: bold;
    color: white;
    font-size: 0.9rem;
}

.mockup-buttons {
    display: flex;
    gap: 0.5rem;
}

.btn-mock {
    padding: 0.25rem 0.75rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 500;
}

.btn-mock.primary {
    background: #007bff;
    color: white;
}

.btn-mock.outline {
    background: transparent;
    color: white;
    border: 1px solid white;
}

.btn-mock.orange {
    background: #ff7b25;
    color: white;
}

.btn-mock.blue {
    background: #1e88e5;
    color: white;
}

.mockup-hero {
    text-align: center;
    color: white;
    padding: 1rem;
}

.mockup-hero h3 {
    font-size: 1rem;
    margin-bottom: 0.5rem;
    font-weight: bold;
}

.mockup-hero p {
    font-size: 0.8rem;
    margin-bottom: 1rem;
    opacity: 0.9;
}

.mockup-features {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
}

.feature-box {
    width: 40px;
    height: 30px;
    background: rgba(255,255,255,0.2);
    border-radius: 4px;
}

.feature-box.orange {
    background: rgba(255, 123, 37, 0.4);
}

.feature-box.blue {
    background: rgba(30, 136, 229, 0.4);
}

.template-info {
    padding: 1.5rem;
}

.template-name {
    color: #495057;
    margin-bottom: 0.5rem;
    font-size: 1.2rem;
}

.template-description {
    color: #6c757d;
    margin-bottom: 1rem;
}

.feature-badge {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    background: #e9ecef;
    color: #495057;
    border-radius: 20px;
    font-size: 0.8rem;
    margin-right: 0.5rem;
    margin-bottom: 0.5rem;
}

.feature-badge.orange {
    background: rgba(255, 123, 37, 0.2);
    color: #ff7b25;
}

.feature-badge.blue {
    background: rgba(30, 136, 229, 0.2);
    color: #1e88e5;
}

.selected-template-preview {
    animation: slideIn 0.3s ease;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}
</style>
{% endblock %}